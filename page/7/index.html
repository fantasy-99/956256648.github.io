<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="Fantasy&#39;s Blog">
<meta property="og:url" content="https://956256648.github.io/page/7/index.html">
<meta property="og:site_name" content="Fantasy&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Fantasy">
<meta name="twitter:card" content="summary"><title>Fantasy's Blog</title><link ref="canonical" href="https://956256648.github.io/page/7/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Fantasy's Blog</div><div class="header-banner-info__subtitle">隐约雷鸣 阴霾天空</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E6%A8%A1%E6%9D%BF/">最小生成树模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      
<p>最小生成树模板题，再次拿来写，一方面为了熟悉一下，另一方面是想试试怎么去写简洁一些。</p>
<p>这两个算法其实都是贪心。稠密图用prim，稀疏图用kruskal吧。</p>
<p>prim算法，记录初始点到其它点的距离，一边找邻接的最短边，一边加点（即vis），一边更新最短的邻接边，每次循环可以确定一个新的边和点。</p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      

        <h2 id="prime"   >
          <a href="#prime" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#prime"></a> Prime</h2>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++)</span><br><span class="line">		d[i]=inf;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[<span class="number">1</span>]; i; i=ne[i])</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> v=to[i];</span><br><span class="line">		d[v]=min(d[v],w[i]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> cnt=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line">	vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">	<span class="keyword">while</span>(++cnt&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> minn=inf;</span><br><span class="line">		<span class="keyword">int</span> k=<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!vis[i]&amp;&amp;minn&gt;d[i])</span><br><span class="line">			&#123;</span><br><span class="line">				k=i;</span><br><span class="line">				minn=d[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">		vis[k]=<span class="number">1</span>;</span><br><span class="line">		ans+=minn;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[k]; i; i=ne[i])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=to[i];</span><br><span class="line">			<span class="keyword">if</span>(!vis[v]&amp;&amp;d[v]&gt;w[i]) d[v]=w[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k!=<span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;orz\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

        <h2 id="kruskal"   >
          <a href="#kruskal" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#kruskal"></a> kruskal</h2>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> fa[x]==x?x:fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x.w&lt;y.w;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//每次记得给并查集fa清空</span></span><br><span class="line">	sort(edge+<span class="number">1</span>,edge+<span class="number">1</span>+m,cmp);<span class="comment">//按边权排序</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> fu=find(edge[i].u);</span><br><span class="line">		<span class="keyword">int</span> fv=find(edge[i].v);</span><br><span class="line">		<span class="keyword">if</span>(fu==fv) <span class="keyword">continue</span>;<span class="comment">//若在同一集合</span></span><br><span class="line">		fa[fv]=fu;<span class="comment">//合并</span></span><br><span class="line">		ans+=edge[i].w;<span class="comment">//加上权值</span></span><br><span class="line">		<span class="keyword">if</span>(++cnt==n<span class="number">-1</span>) <span class="keyword">break</span>;<span class="comment">//边数够了</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt==n<span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;orz\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E6%A8%A1%E6%9D%BF/">拓扑排序模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      
<p>拓扑排序模板题，DAG有向无环图。拓扑序多用于并发工程问题，计算最晚时间或者最早时间，也可以用来判断有向图是否有环。</p>
<p>关键部分是记录每个点的入度，将入度为0的点入队。然后将临接点的入度减1，若入度为0，则入队，直到无点入队。判环只需记录点数就行，因为如果存在环，则最终一定无法入队。</p>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1113" >例题</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">topsort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(ind[i]==<span class="number">0</span>) q.push(i);</span><br><span class="line">		fw[i]=cost[i];<span class="comment">//记入度为0的点的最晚时间即为自身时间</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(q.size())</span><br><span class="line">	&#123;</span><br><span class="line">		cnt++;</span><br><span class="line">		<span class="keyword">int</span> u=q.front(); q.pop();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u]; i; i=ne[i])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=to[i]; <span class="keyword">int</span> <span class="built_in">cos</span>=cost[u];</span><br><span class="line">			ind[v]--;<span class="comment">//入度--</span></span><br><span class="line">			<span class="keyword">if</span>(ind[v]==<span class="number">0</span>) q.push(v);<span class="comment">//入度为0入队</span></span><br><span class="line">			fw[v]=max(fw[v],fw[u]+cost[v]);<span class="comment">//更新完成当前任务的最晚时间</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) sum=max(sum,fw[i]);</span><br><span class="line">	<span class="keyword">if</span>(cnt!=n) <span class="built_in">printf</span>(<span class="string">&quot;no\n&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E3%80%90%E5%B9%B6%E6%9F%A5%E9%9B%86%E3%80%91CF%E6%9F%90D/">【并查集】CF某D</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="题目"   >
          <a href="#题目" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
      
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://codeforces.com/gym/101669/D" >CF</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="题解"   >
          <a href="#题解" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#题解"></a> 题解</h1>
      
<p>并查集或者最小生成树。。</p>
<p>每一列只有两个1。</p>
<p>矩阵中只有1和0，计算规则已经给出。</p>
<p>正解就是，每列中的两个1所在的行建边，然后会有多个连通块，每个连通块的贡献是元素个数减一。</p>
<p>线性无关最大组的秩。</p>
<p>不太容易想到用并查集的思想。</p>
<p>题还挺难读的。</p>
<p>而且注意一点，fa[i]不一定是i点的祖宗节点，所以要用find(i)。</p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E5%B7%AE%E5%88%86%E7%BA%A6%E6%9D%9F%E6%A8%A1%E6%9D%BF/">差分约束模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      
<p>差分约束，常用来解不等式组，很有趣的一种解决办法。</p>
<p>今天在洛谷题单上看到一句话，图论其实也是数学问题，只是用图的形式表现出来了。不能再赞同了！</p>
<p>建图只是解决数学问题的一种手段罢了。</p>
<p>简单说，差分约束，就是将不等式组的变量化为点，不等关系化为边。</p>
<p>差分约束系统的解法如下：</p>
<p>1、 根据条件把题意通过变量组表达出来得到不等式组，注意要发掘出隐含的不等式，比如说前后两个变量之间隐含的不等式关系。</p>
<p>2、 进行建图：</p>
<p>首先根据题目的要求进行不等式组的标准化。</p>
<p>(1)、如果要求取最小值，那么求出最长路，那么将不等式全部化成xi – xj &gt;=  k的形式，这样建立j-&gt;i的边，权值为k的边，如果不等式组中有xi – xj &gt; k，因为一般题目都是对整形变量的约束，化为xi – xj &gt;= k+1即可，如果xi – xj = k呢，那么可以变为如下两个：xi – xj &gt;= k, xi – xj &lt;= k,进一步变为xj – xi &gt;= -k，建立两条边即可。</p>
<p>(2)、如果求取的是最大值，那么求取最短路，将不等式全部化成xi – xj &lt;= k的形式, 这样建立j-&gt;i的边，权值为k的边，如果像上面的两种情况，那么同样地标准化就行了。</p>
<p>(3)、如果要判断差分约束系统是否存在解，一般都是判断环，选择求最短路或者最长路求解都行，只是不等式标准化时候不同，判环地话，用spfa即可，n个点中如果同一个点入队超过n次，那么即存在环。</p>
<p>值得注意的一点是：建立的图可能不联通，我们只需要加入一个超级源点，比如说求取最长路时图不联通的话，我们只需要加入一个点S，对其他的每个点建立一条权值为0的边图就联通了，然后从S点开始进行spfa判环。最短路类似。</p>
<p>3、 建好图之后直接spfa或bellman-ford求解，不能用dijstra算法，因为一般存在负边，注意初始化的问题。</p>
<p>4、其实差分约束用最短路和最长路写都行，只是麻烦或者简单的问题。</p>
<p>挂一个博客https://www.luogu.com.cn/blog/123StephenCurry/solution-p5960</p>
<p>写的蛮好的。</p>
<p>其实核心就是建图。</p>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P5960" >洛谷</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ms=<span class="number">2e5</span>+<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,tot=<span class="number">0</span>,m;</span><br><span class="line"><span class="keyword">int</span> head[ms],to[ms],ne[ms],w[ms],dis[ms],in[ms];</span><br><span class="line"><span class="keyword">bool</span> vis[ms];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	to[++tot]=b;</span><br><span class="line">	ne[tot]=head[a];</span><br><span class="line">	head[a]=tot;</span><br><span class="line">	w[tot]=c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(dis,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dis));</span><br><span class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">	dis[<span class="number">0</span>]=<span class="number">0</span>; vis[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	q.push(<span class="number">0</span>);</span><br><span class="line">	in[<span class="number">0</span>]++;</span><br><span class="line">	<span class="keyword">while</span>(q.size())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> u=q.front(); q.pop();</span><br><span class="line">		vis[u]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u]; i; i=ne[i])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> v=to[i],cost=w[i];</span><br><span class="line">			<span class="keyword">if</span>(dis[v]&gt;dis[u]+cost)</span><br><span class="line">			&#123;</span><br><span class="line">				dis[v]=dis[u]+cost;</span><br><span class="line">				<span class="keyword">if</span>(!vis[v])</span><br><span class="line">				&#123;</span><br><span class="line">					vis[v]=<span class="number">1</span>;</span><br><span class="line">					q.push(v);</span><br><span class="line">					in[v]++;</span><br><span class="line">					<span class="keyword">if</span>(in[v]&gt;=n+<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> a,c,b;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">		add(b,a,c);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">		add(<span class="number">0</span>,i,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span>(!spfa()) <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++)</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,dis[i]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,dis[n]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E5%AF%B9%E6%8B%8D%E6%A8%A1%E6%9D%BF/">对拍模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="主文件"   >
          <a href="#主文件" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#主文件"></a> 主文件</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//主程序 duipai.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> T=<span class="number">1</span>; T&lt;=<span class="number">10000</span>; T++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//自行设定适当路径</span></span><br><span class="line">		system(<span class="string">&quot;random.exe&quot;</span>);</span><br><span class="line">		<span class="comment">//已经运行的CPU时间，windows下是ms</span></span><br><span class="line">		<span class="keyword">double</span> st=clock();</span><br><span class="line">		system(<span class="string">&quot;sol.exe&quot;</span>);</span><br><span class="line">		<span class="keyword">double</span> ed=clock();</span><br><span class="line">		system(<span class="string">&quot;bf.exe&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(system(<span class="string">&quot;fc data.out data.ans&quot;</span>))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//发生错误 </span></span><br><span class="line">			<span class="built_in">puts</span>(<span class="string">&quot;Wrong Answer&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Accepted, 测试点#%d, 用时 %.0lfms\n&quot;</span>,T,ed-st);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//freopen(&quot;data.in&quot;,&quot;r&quot;,stdin);freopen(&quot;data.out&quot;,&quot;w&quot;,stdout);自己的 </span></span><br><span class="line"><span class="comment">//freopen(&quot;data.in&quot;,&quot;r&quot;,stdin);freopen(&quot;data.ans&quot;,&quot;w&quot;,stdout);正解的 </span></span><br></pre></td></tr></table></div></figure>

        <h1 id="随机数据生成文件"   >
          <a href="#随机数据生成文件" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#随机数据生成文件"></a> 随机数据生成文件</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//random.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">long</span> <span class="keyword">long</span>)rand()*rand()%n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	freopen(<span class="string">&quot;data.in&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdout</span>);</span><br><span class="line">	srand((<span class="keyword">unsigned</span>)time(<span class="number">0</span>));</span><br><span class="line">	<span class="comment">//int n=random(10000)+1; </span></span><br><span class="line">	<span class="comment">//int m=1000000000;</span></span><br><span class="line">	<span class="comment">//printf(&quot;%d\n&quot;,random(2*m+1)-m);</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h1 id="bf文件"   >
          <a href="#bf文件" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#bf文件"></a> bf文件</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	freopen(<span class="string">&quot;data.in&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="built_in">stdin</span>);freopen(<span class="string">&quot;data.out&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdout</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h1 id="自己写的文件"   >
          <a href="#自己写的文件" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#自己写的文件"></a> 自己写的文件</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	freopen(<span class="string">&quot;data.in&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="built_in">stdin</span>);freopen(<span class="string">&quot;data.ans&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdout</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E3%80%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%8Chash%E3%80%9121%E5%B1%B1%E4%B8%9C%E7%9C%81%E8%B5%9BF/">【字符串双hash】21山东省赛F</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="题目"   >
          <a href="#题目" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
      
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/15600/F" >CF</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>n个字符串，有多少对字符串拼接后可以切割成完全相同的两半</p>

        <h1 id="题解"   >
          <a href="#题解" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#题解"></a> 题解</h1>
      
<p>双哈希+字符串，通过手动检查，可以发现，如果加上一个字符串可以使得整个穿可以被分割，那么这个字符串的部分前缀和后缀是相同的，然后加上一个和中间子串一样的字符串。</p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ms=<span class="number">4e5</span>+<span class="number">9</span>;</span><br><span class="line"><span class="keyword">const</span> ll base1=<span class="number">2333333</span>;</span><br><span class="line"><span class="keyword">const</span> ll base2=<span class="number">13331</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod1=<span class="number">999999998</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod2=<span class="number">91815541</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;ll,ll&gt; P;</span><br><span class="line"><span class="built_in">map</span>&lt; P ,<span class="keyword">int</span>&gt;mp;</span><br><span class="line"></span><br><span class="line">ll pw1[ms],pw2[ms];</span><br><span class="line">ll p1[ms],p2[ms];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">&#125;a[ms];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.s.size()&lt;y.s.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">P <span class="title">check</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans1,ans2;</span><br><span class="line">    ans1=(p1[r]-p1[l<span class="number">-1</span>]*pw1[r-l+<span class="number">1</span>]%mod1+mod1)%mod1;<span class="comment">//这是子串的hash值写法</span></span><br><span class="line">    ans2=(p2[r]-p2[l<span class="number">-1</span>]*pw2[r-l+<span class="number">1</span>]%mod2+mod2)%mod2;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">make_pair</span>(ans1,ans2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    pw1[<span class="number">0</span>]=<span class="number">1</span>; pw2[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=ms<span class="number">-9</span>; i++)<span class="comment">//base的i次方</span></span><br><span class="line">    &#123;</span><br><span class="line">        pw1[i]=pw1[i<span class="number">-1</span>]*base1%mod1;</span><br><span class="line">        pw2[i]=pw2[i<span class="number">-1</span>]*base2%mod2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>; x&lt;=n; x++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[x].s;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n,cmp);<span class="comment">//按长度排序</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p1[<span class="number">0</span>]=<span class="number">0</span>; p2[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len=a[i].s.size();</span><br><span class="line">        <span class="built_in">string</span> c=a[i].s;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=len; i++)<span class="comment">//对于字符串的双hash</span></span><br><span class="line">        &#123;</span><br><span class="line">            p1[i]=(p1[i<span class="number">-1</span>]*base1+c[i<span class="number">-1</span>])%mod1;</span><br><span class="line">            p2[i]=(p2[i<span class="number">-1</span>]*base2+c[i<span class="number">-1</span>])%mod2;</span><br><span class="line">        &#125;</span><br><span class="line">        P pp=check(<span class="number">1</span>,len);<span class="comment">//整个串</span></span><br><span class="line">        ans=ans+mp[pp];</span><br><span class="line">        mp[pp]=mp[pp]+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i*<span class="number">2</span>&lt;len; i++)<span class="comment">//因为已经排好序，所以每次加上的必定是短的串</span></span><br><span class="line">        &#123;</span><br><span class="line">            P pp1,pp2;</span><br><span class="line">            pp1=check(<span class="number">1</span>,i);</span><br><span class="line">            pp2=check(len-i+<span class="number">1</span>,len);</span><br><span class="line">            <span class="keyword">if</span>(pp1==pp2)<span class="comment">//前缀和后缀相同，则找到中间子串的hash值</span></span><br><span class="line">            &#123;</span><br><span class="line">                pp=check(i+<span class="number">1</span>,len-i);</span><br><span class="line">                ans=ans+mp[pp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C%E6%A8%A1%E6%9D%BF/">字符串哈希模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      

        <h2 id="单值hash"   >
          <a href="#单值hash" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#单值hash"></a> 单值hash</h2>
      
<p>字符串hash就是找一个值改变一下它的进制，比如每个字符都*131或者13131。</p>
<p>记得用ull，自然溢出。</p>
<p>这样最后，几乎每个字符串都会有唯一的哈希值。</p>

        <h2 id="双hash"   >
          <a href="#双hash" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#双hash"></a> 双hash</h2>
      
<p>双值Hash就是用两个不同的mod值来计算Hash，如果两个Hash值都相等才认为是同一个字符串，Hash冲突概率降低了很多，但是常数大，容易被卡。时间上：自然溢出法&lt;单Hash+大质数&lt;双Hash+大质数。</p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P3370" >洛谷P3370</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="单"   >
          <a href="#单" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#单"></a> 单</h2>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ull unsigned long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> ull P=<span class="number">131</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MS=<span class="number">1e5</span>+<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">ull a[MS];</span><br><span class="line"><span class="keyword">char</span> str[MS];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line">		<span class="keyword">int</span> len=<span class="built_in">strlen</span>(str);</span><br><span class="line">		ull ans=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;len; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			ans+=<span class="number">131</span>*ans+(ull)str[j];</span><br><span class="line">		&#125;</span><br><span class="line">		a[i]=ans;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">	sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">		<span class="keyword">if</span>(a[i]!=a[i<span class="number">-1</span>]) cnt++;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

        <h2 id="双"   >
          <a href="#双" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#双"></a> 双</h2>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=ms<span class="number">-9</span>; i++)<span class="comment">//base的i次方</span></span><br><span class="line">&#123;</span><br><span class="line">    pw1[i]=pw1[i<span class="number">-1</span>]*base1%mod1;</span><br><span class="line">    pw2[i]=pw2[i<span class="number">-1</span>]*base2%mod2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=len; i++)<span class="comment">//对于字符串的双hash，递推</span></span><br><span class="line">&#123;</span><br><span class="line">    p1[i]=(p1[i<span class="number">-1</span>]*base1+c[i])%mod1;</span><br><span class="line">    p2[i]=(p2[i<span class="number">-1</span>]*base2+c[i])%mod2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">P <span class="title">check</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans1,ans2;</span><br><span class="line">    ans1=(p1[r]-p1[l<span class="number">-1</span>]*pw1[r-l+<span class="number">1</span>]%mod1+mod1)%mod1;<span class="comment">//这是子串的hash值写法</span></span><br><span class="line">    ans2=(p2[r]-p2[l<span class="number">-1</span>]*pw2[r-l+<span class="number">1</span>]%mod2+mod2)%mod2;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">make_pair</span>(ans1,ans2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E7%94%9F%E6%B4%BB%E5%B0%8F%E5%A6%99%E6%8B%9B/">生活小妙招</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>关于memset和赋值</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));</span><br><span class="line"><span class="built_in">memset</span>(v,<span class="number">-1</span>,<span class="keyword">sizeof</span>(v));<span class="comment">//以上两个值不变，可以直接赋值</span></span><br><span class="line"><span class="built_in">memset</span>(v,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(v));<span class="comment">//这个是赋一个最大值</span></span><br><span class="line"><span class="comment">//其他情况最好直接循环赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c++还有一个直接赋值函数，速度比m慢，比for快，是什么我给忘记了，以后看到了再补</span></span><br></pre></td></tr></table></div></figure>
<p><strong>scanf读取字符串（从1，1开始）</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">char</span> a[MS][MS];</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a[i]+<span class="number">1</span>);</span><br><span class="line"><span class="comment">//不要带取地址符</span></span><br><span class="line"><span class="comment">//也不能直接按行输出a[i]</span></span><br></pre></td></tr></table></div></figure>
<p><strong>关于读入与输出的速度</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//快读，最快</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c=getchar();</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">isdigit</span>(c))&#123;<span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>)f=<span class="number">-1</span>;c=getchar();&#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">isdigit</span>(c))x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>),c=getchar();</span><br><span class="line">    <span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//scanf和printf次之</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭同步</span></span><br><span class="line">ios::sync_with_stdio(<span class="literal">false</span>)<span class="comment">//此时也建议将endl换为\n，因为速度相差很大</span></span><br></pre></td></tr></table></div></figure>
<p><strong>交互</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*交互题，说起来就是与机器互动，你向机器请求需要返回的内容，它给你结果，然后你读取，再进行一下步。</span></span><br><span class="line"><span class="comment">注意，每次询问过后，清空缓冲区。然后再读入*/</span></span><br><span class="line">    fflush(<span class="built_in">stdout</span>);</span><br></pre></td></tr></table></div></figure>
<p><strong>文件输入输出</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//刚进主函数就写上，平时自己对拍调试比较方便</span></span><br><span class="line">freopen(<span class="string">&quot;input.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="built_in">stdin</span>);</span><br><span class="line">freopen(<span class="string">&quot;output.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdout</span>)</span><br></pre></td></tr></table></div></figure>
<p><strong>直接除2和位运算除2</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">目前编译器，默认都是算术移位</span><br><span class="line">右移运算是向下取整，整数除法是向零取整</span><br><span class="line"><span class="number">-3</span>&gt;&gt;<span class="number">1</span> = <span class="number">-2</span></span><br><span class="line"><span class="number">-3</span>/<span class="number">2</span>  = <span class="number">-1</span></span><br><span class="line">二分的时候使用位运算较好，整数除法在二分值域出现负数时会有问题。</span><br></pre></td></tr></table></div></figure>
<p><strong>计算一个32位无符号整数有多少个位为1</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">__builtin_popcount(n)</span><br></pre></td></tr></table></div></figure>
<p><strong>_int128的输入输出</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __int128 LL;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> __int128 <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    __int128 x=<span class="number">0</span>,f=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> ch=getchar();</span><br><span class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">&#x27;0&#x27;</span>||ch&gt;<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            f=<span class="number">-1</span>;</span><br><span class="line">        ch=getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        ch=getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(__int128 x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">        x=-x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;<span class="number">9</span>)</span><br><span class="line">        print(x/<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(x%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>set默认是升序排列</strong></p>
<p><strong>typedef给它们一些别名</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span> &gt; P;</span><br></pre></td></tr></table></div></figure>
<p><strong>队列与优先队列</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//优先队列</span></span><br><span class="line"><span class="built_in">priority_queue</span>&lt;P, <span class="built_in">vector</span>&lt; P &gt;, greater&lt; P &gt; &gt; 	q;</span><br><span class="line"><span class="comment">//优先队列队首是top，一般队列是front</span></span><br></pre></td></tr></table></div></figure>
<p><strong>stringstream的奇特用法</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//stringstream可以将字符直接化为数字</span></span><br><span class="line"><span class="comment">//现在比如输入一串数字 1 2 3 4 5....</span></span><br><span class="line"><span class="comment">//但是没有指定个数，就可以先用string读一行，然后赋值给stringstream，就可以实现对应操作。</span></span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">111</span>];</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line">getline(<span class="built_in">cin</span>,s);</span><br><span class="line"><span class="built_in">stringstream</span> ss;</span><br><span class="line">ss&lt;&lt;s;</span><br><span class="line"><span class="keyword">while</span>(ss&gt;&gt;a[++cnt]);</span><br></pre></td></tr></table></div></figure>
<p><strong>平方和和立方和公式</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">平方和：n（n+<span class="number">1</span>)（<span class="number">2</span>n+<span class="number">1</span>）/<span class="number">6</span></span><br><span class="line">立方和：[n(n+<span class="number">1</span>)/<span class="number">2</span>]^<span class="number">2</span></span><br></pre></td></tr></table></div></figure>
<p><strong>二分函数</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">lower_bound( begin,end,num)；</span><br><span class="line">从数组的begin位置到end<span class="number">-1</span>位置二分查找第一个大于或等于num的数字，找到返回该数字的地址，不存在则返回end。通过返回的地址减去起始地址begin,得到找到数字在数组中的下标。</span><br><span class="line"></span><br><span class="line">upper_bound( begin,end,num)；</span><br><span class="line">从数组的begin位置到end<span class="number">-1</span>位置二分查找第一个大于num的数字，找到返回该数字的地址，不存在则返回end。通过返回的地址减去起始地址begin,得到找到数字在数组中的下标。</span><br><span class="line"></span><br><span class="line">对于从<span class="number">1</span>位置开始的数组，比如a[]</span><br><span class="line">upper_bound(a+<span class="number">1</span>,a+<span class="number">1</span>+n,num)-a;</span><br><span class="line">返回的即为第一个大于num的值的下标。</span><br></pre></td></tr></table></div></figure>
<p><strong>位运算</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">加、 与 、或</span><br><span class="line">a+b = a&amp;b + a|b</span><br><span class="line">    </span><br><span class="line">lowbit运算</span><br><span class="line">	x&amp;(-x)得到其后面最低的一位一</span><br><span class="line">	</span><br><span class="line">第n位设为<span class="number">1</span></span><br><span class="line">x = x | (<span class="number">1</span> &lt;&lt; n);</span><br><span class="line"></span><br><span class="line">第n位设为<span class="number">0</span></span><br><span class="line">x = x &amp; ~ (<span class="number">1</span> &lt;&lt; n);</span><br><span class="line"></span><br><span class="line">第n位取反</span><br><span class="line">x = x ^ (<span class="number">1</span> &lt;&lt; n);</span><br><span class="line"></span><br><span class="line">将最右边的<span class="number">1</span>设为<span class="number">0</span></span><br><span class="line">x = x &amp; (x<span class="number">-1</span>);</span><br></pre></td></tr></table></div></figure>
<p><strong>bitset</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//bitset可以将复杂度降为n/64或者n/32</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">bitset</span>&lt;32&gt; <span class="title">b</span><span class="params">(<span class="number">16</span>)</span></span>;<span class="comment">//将16的二进制保存进去</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s1=<span class="string">&quot;1001010&quot;</span>;<span class="comment">//直接存01字符串</span></span><br><span class="line"><span class="keyword">char</span> s2[]=<span class="string">&quot;10011101&quot;</span>;</span><br><span class="line"><span class="function">biset&lt;32&gt; <span class="title">b1</span><span class="params">(s1)</span></span>;</span><br><span class="line"><span class="function">biset&lt;32&gt; <span class="title">b2</span><span class="params">(s2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bitset</span>&lt;ms*ms&gt; b[ms];<span class="comment">//可以是二维</span></span><br><span class="line"></span><br><span class="line">b.size();  <span class="comment">//求大小，开的多大就是多大</span></span><br><span class="line"></span><br><span class="line">b.count(); <span class="comment">//统计1的个数</span></span><br><span class="line"></span><br><span class="line">b.flip();<span class="comment">//将全部位置取反</span></span><br><span class="line">b.filp(<span class="number">0</span>); <span class="comment">//只将0位置取反，参数可以是int</span></span><br><span class="line"></span><br><span class="line">b.<span class="built_in">set</span>(); <span class="comment">//全置1</span></span><br><span class="line">b.reset(); <span class="comment">//全置0</span></span><br><span class="line"></span><br><span class="line">b._Find_first();<span class="comment">//从低位到高位找下一个含有1的位置</span></span><br><span class="line">b._Find_next(pos);<span class="comment">//  找当前位置的下一个1的位置，也是低到高</span></span><br></pre></td></tr></table></div></figure>
<p><strong>几组hash模值</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//const ull base=2333333;</span></span><br><span class="line"><span class="comment">//#define mod 999999998</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//const ull base=13331;</span></span><br><span class="line"><span class="comment">//#define mod 91815541</span></span><br></pre></td></tr></table></div></figure>
<p><strong>组合数公式</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">C(n,m) = A(n,m)/m! = n!/((n-m)! m!)</span><br></pre></td></tr></table></div></figure>
<p><strong>map和set判断元素是否存在</strong></p>
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mp.find(元素)!=mp.end <span class="comment">//表示存在</span></span><br><span class="line">mp.conunt(元素) <span class="comment">//为1表示存在，0表示不存在</span></span><br><span class="line"><span class="comment">//set同理</span></span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/%E5%9B%BE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">图的基本概念</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      
<p><strong>图中的基本概念</strong></p>
<ol>
<li>图的匹配：指的是图的不具有公共端点的边的集合。图的最大匹配指不具有公共端点的最大边数。常见的问题有二分图的最大匹配，可以用dicnic解决或者用匈牙利算法解决。</li>
<li>图的边覆盖：是边子集的一种，指的是图中的所有顶点都是边子集中的某一条边的端点。最小边覆盖用最少的边来覆盖所有的顶点。</li>
<li>图的顶点覆盖：是顶点子集的一种，最小顶点覆盖指的是用最少的顶点来覆盖图中的所有边（只要有一条边的端点在子集种就认为该边被覆盖了）</li>
<li>图的独立子集：任意两点不相邻的点的集合。图的最大独立子集指的是让该集合中顶点数最多。</li>
<li>假设一个无向图G，一个团（顶点集合）是图G的子图，该集合中任意两点都相邻。最大团指的是顶点数量最多的极大团。</li>
<li>图的割集：设S是G的边集E的一个边子集，如果在连通图G中删除S的所有边．则G-S不连通，并且不存在S的真子集使G-S不连通，就称边集S是图G的一个割集。（最小割指的是最小化边集，也可以是最小边权集。）</li>
</ol>
<p><strong>之间的关系</strong></p>
<ol>
<li>最大匹配+最小边覆盖=顶点数</li>
<li>最大独立集+最小顶点覆盖=顶点数</li>
<li>最大独立集+最大匹配=顶点数</li>
<li>最大团 = 补图的最大独立集</li>
<li>最大独立集 = 补图的最大团</li>
<li>如果图是二分图 最大匹配=最小顶点覆盖  最大独立集+最大匹配数=顶点数</li>
<li>最大流最小割定理：图的最小割=最大流</li>
<li>有向无环图中：最小路径覆盖=顶点数-最大匹配数</li>
</ol>
<p><strong>求最大独立集</strong></p>
<p>求最大独立集其实有两种写法，如果图是一个二分图，就可以直接用匈牙利算法或者网络流算法（dicnic）求出最大匹配，然后得出最大独立集。</p>
<p>而如果图是一般的图，我们只需要求出补图的最大团即可，可用dfs求解。是一个NP完全问题。</p>
<p>噢，还有一种比较冷门的算法，，其实也不知道算不算冷门，叫做带花树，解决一般图的最大匹配，啧啧，看着就头大。</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/01/26/kmp%E6%A8%A1%E6%9D%BF/">kmp模板</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2022-01-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2022-01-26</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="简介"   >
          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1>
      
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.zhihu.com/question/21923021" >一个很好的讲解</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>很好的一个kmp解析</p>
<p>给一个文本字符串和一个模板字符串。</p>
<p>正常暴力我们是挨个匹配，遇到不匹配的位置，我们就会重头再来，这样复杂度显然很大，而kmp算法呢，就是想办法在每次不匹配的时候，不重头开始进行，而是找个上个匹配的位置继续进行，这样就能大大优化。</p>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P3375" >例题</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h1 id="源码"   >
          <a href="#源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#源码"></a> 源码</h1>
      
<figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MS=<span class="number">1e6</span>+<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> a[MS],b[MS];</span><br><span class="line"><span class="keyword">int</span> p[MS];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>,a+<span class="number">1</span>,b+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> l1=<span class="built_in">strlen</span>(a+<span class="number">1</span>),l2=<span class="built_in">strlen</span>(b+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> i,j=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">2</span>; i&lt;=l2; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(j&gt;<span class="number">0</span> &amp;&amp; b[i]!=b[j+<span class="number">1</span>]) j=p[j];<span class="comment">//找到上次的那个匹配位置</span></span><br><span class="line">		<span class="keyword">if</span>(b[i]==b[j+<span class="number">1</span>]) j++;<span class="comment">//成功就++</span></span><br><span class="line">		p[i]=j;</span><br><span class="line">	&#125;</span><br><span class="line">	j=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=l1; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(j&gt;<span class="number">0</span> &amp;&amp; a[i]!=b[j+<span class="number">1</span>]) j=p[j];</span><br><span class="line">		<span class="keyword">if</span>(a[i]==b[j+<span class="number">1</span>]) j++;</span><br><span class="line">		<span class="keyword">if</span>(j==l2) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i-l2+<span class="number">1</span>),j=p[j];<span class="comment">//成功匹配。j=p[j]可以去掉。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;l2; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,p[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,p[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/page/6/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/8/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/header.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">但盼风雨来 能留你在此</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">84</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">16</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">66</div><div class="sidebar-ov-state-item__name">标签</div></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>